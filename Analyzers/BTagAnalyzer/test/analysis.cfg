process analysis = {

  #keep the logging output to a nice level
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  source = PoolSource {
	 untracked vstring fileNames = {

	 # 1_2_3 samples
	 '/store/RelVal/2007/2/28/RelVal123QCD_pt50_80/0000/A2733F5B-D6C8-DB11-A167-00304875ABE9.root'

	 }
	 untracked int32 maxEvents = 1000
  }

  # 120 samples
  include "Analyzers/BTagAnalyzer/test/mc-onsel-120_QCD_pt_80_120.cfg"


  ## Reco Vertex

  ############ initialize magnetic field #########################
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  include "TrackingTools/TransientTrack/data/TransientTrackBuilder.cfi"
  include "Analyzers/BTagAnalyzer/data/OffLinePVFromCTFTracksAVF.cfi"
  #include "Analyzers/BTagAnalyzer/data/OffLinePVFromCTFTracksKVF.cfi"
  #include "Analyzers/BTagAnalyzer/data/OffLinePVFromCTFTracksTKF.cfi"

  sequence vertexreco = {
        offlinePVFromCTFTracksAVF
        #offlinePVFromCTFTracksKVF,
        #offlinePVFromCTFTracksTKF
  }

  module myanalysis = BTagAnalyzer {

	 InputTag simG4 = g4SimHits
	 untracked string outputFile = "results.root"
	 untracked vstring TrkCollectionList = { "ctfWithMaterialTracks" }
	 untracked vstring  PVCollectionList = { "offlinePVFromCTFTracksAVF" }
	 string Muons = "globalMuons"
	 string Jets  = "iterativeCone5CaloJets"
	 string JetTracks = "jetTracksAssociator"

	 double coneSize = 0.5
	 PSet jetIdParameters = {
	      string mcSource = "VtxSmeared"
              bool fillPartons = true
              bool fillHeavyHadrons = false
              bool fillLeptons =  false
              double coneSizeToAssociate = 0.3
              bool physicsDefinition = false
              bool rejectBCSplitting = false
              vstring vetoFlavour = {  }
	 }

	 untracked vstring TaggerList = { "TrackCounting" }

  }


  module dump = EventContentAnalyzer {}

  service = Tracer { untracked string indention = "==>"}

  path p = {
	   vertexreco,
	   myanalysis
           #dump
           }
		
}
