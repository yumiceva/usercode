process TQAFL2 = {

  # initialize MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  replace MessageLogger.cerr.threshold = "INFO"
  # return trigger report (including filter efficiencies)
  untracked PSet options = { untracked bool wantSummary = true }

  ## input ##
  source = PoolSource {
    untracked vstring fileNames = {
      #'file:TQAFLayer1Output.root'
      'file:TQAFLayer1OutputAOD.root'
    }
  }
  
  # results from Layer1
  #include "Analyzers/TQAFAnalyzer/test/datasets/Gumbo_100pb_topSemiLepMuon_L1.cff"
  include "Analyzers/TQAFAnalyzer/test/datasets/Zp1TeVfullLayer1.cff"

  untracked PSet maxEvents = { untracked int32 input = -1 }


  # TQAF Layer 2 for the ttbar semi-leptonic final state
  #include "TopQuarkAnalysis/TopEventProducers/data/TQAFLayer2_TtSemi.cff"
  #### do my own Layer2 ####
   
  # Construct the MC Generated Ttbar Event
  include "TopQuarkAnalysis/TopEventProducers/data/TtGenEvtProducer.cff"

  sequence tqafLayer2_TtSemi = {
    makeGenEvt
  }

  #### end Layer2 ######

  ### CSA07 weights ###
  module csaweightproducer = CSA07EventWeightProducer {
    InputTag src = source

    # verbosity
    untracked bool talkToMe = false

    # overall luminosity normalization  (in pb-1)
    double overallLumi = 1000.
  }
  
  #### CSA07 process id filter ###
  module csa07ProcessIdFilter = CSA07ProcessIdFilter {
    // only ttbar
    vint32 csa07Ids = { 22,23,24,25,26 }
  }  
 
  # my analyzer
  module myAna = TtEventAnalysis {
    # Switch on/off the verbosity and turn on/off histogram production
    untracked bool debug     = false
    untracked bool writeAscii = true
    untracked string asciiFileNanme = 'RESULTS_L2/TableOutput.txt'
    untracked bool applyWeights = false
    untracked bool GenFilter = false
    untracked int32 event    = -1
    untracked bool displayJets = false
    InputTag genEventSource  = genEvt
    InputTag muonSource      = selectedLayer1Muons
    InputTag electronSource  = selectedLayer1Electrons
    InputTag metSource       = selectedLayer1METs
    InputTag bjetSource      = selectedLayer1Jets
    InputTag ljetSource      = selectedLayer1Jets
    InputTag EvtSolution     = solutions::TEST
    string leptonFlavour = 'muon'    //electron or muon
    # Name of the root file which will contain the output histograms
    #untracked string rootFileName = 'RESULTS_L2/MyAna_Gumbo_100pb_topSemiLepMuon_ttbarjets.root'
    untracked string rootFileName = 'RESULTS_L2/MyAna_Zp1TeVfull.root'
  }


  path p = {

    #csa07ProcessIdFilter,
    tqafLayer2_TtSemi,
    myAna

  }

 
}
